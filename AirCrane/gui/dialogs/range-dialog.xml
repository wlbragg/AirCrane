<?xml version="1.0"?>

<PropertyList>
	<name>range-dialog</name>
	<x>-1344</x>
	<y>2</y>
	<layout>hbox</layout>
	<default-padding>2</default-padding>

  <canvas>
      <name>range</name>
      <valign>fill</valign>
      <halign>fill</halign>
      <stretch>true</stretch>
      <pref-width>300</pref-width>
      <pref-height>200</pref-height>
      <nasal>      
          <load>
              <![CDATA[
              var my_canvas = canvas.get( cmdarg() );

              var root = my_canvas.createGroup();
              var text = root.createChild("text")
                  .setText("0")
                  .setTranslation(20, 20)
                  .setAlignment("left-top")
                  .setFontSize(30)
                  .setFont("LiberationFonts/LiberationSans-Regular.ttf")
                  .set("max-width", 300)
                  .setColor(1,1,1);

              var range_loop = func {

                  text.setText( "Name "~getprop("/sim/cargo/current-cargo-name")~"\n"~
                                "Range "~sprintf("%4.0f", getprop("/sim/cargo/current-cargo-distance"))~"\n"~
                                "ConnDist "~sprintf("%4.0f", getprop("/sim/cargo/current-connection-distance"))~"\n"~
                                "CargoElev "~sprintf("%4.0f", getprop("/sim/cargo/current-cargo-elevation-two"))~"\n"~
                                "StackElev "~sprintf("%4.0f", getprop("/sim/cargo/current-cargo-elevation")));
              }

              var range_timer = maketimer(0.25, func{range_loop()});
              range_timer.start();

              ]]>
          </load>
          <unload>
              range_timer.stop();
          </unload>
      </nasal>
  </canvas>
  </PropertyList>
